<div *ngIf="details" id="banner" class="col-lg-12 py-5 mt-5 text-center dusty-grass-gradient p-0">
  	
  		<h3 class="points-text"><strong class="mr-1">Earned Points:</strong> {{details.pzwpoints | number:'1.2-3'}} <i class="fas fa-coins"></i></h3>
  		<h5 class="name-text">{{details.firstname}} {{details.lastname}}</h5>

  </div>

<div class="container mt-2">

  <mat-tab-group mat-align-tabs="left">

  	<mat-tab label="Second">
	  	<ng-template mat-tab-label>
	        <i class="fas fa-user-circle"></i>
	        <span class="ml-2">Profile</span>
	    </ng-template>


	    <div class="container-fluid">
	    	
	    	<div class="col-lg-12">
	    		
	    		<div class="row">
	    			
	    			<div class="col-lg-12 text-center heavy-rain-gradient mb-2 pt-2">
	    				
	    				<img style="height: 200px; width:200px;" class="color-block mb-3 mx-auto rounded-circle z-depth-1-half" src="{{(url)? url:'https://cdn.ussailing.org/wp-content/uploads/bb-plugin/cache/blank-head-profile-pic-for-a-man-circle.jpg'}}">

	    			</div>

	    			


	    			<div *ngIf="details" style="margin: auto;" class="col-lg-8">
	    				

	    				<div class="row">
	    					

	    					<div class="col-lg-12 border-top  mb-2 pt-2">

	    						<ul style="font-size: .8rem;" class="list-unstyled">
	    							
	    							<li>
			    						Firstname:
			    						<span class="float-right">{{details.firstname}}</span>
			    					</li>

			    					<li>
			    						Middlename: 
			    						<span class="float-right">{{details.middlename}}</span>
			    					</li>

			    					<li>
			    						Lastnamename:
			    						<span class="float-right">{{details.lastname}}</span>
			    					</li>

	    						</ul>
			    				
			    			</div>

			    			<div class="col-lg-12 border-top  mb-2">


			    				<ul style="font-size: .8rem;" class="list-unstyled">
			    					
			    					<li>
			    						Phone: 
			    						<span class="float-right">{{details.phone}}</span>
			    					</li>
			    					<li>
			    						Email:
			    						<span class="float-right">{{details.email}}</span>
			    					</li>
			    					<li>
			    						Password:
			    						<span class="float-right">**********</span>
			    					</li>

			    				</ul>

			    				
			    			</div>

			    			<div style="font-size: .7rem" class="col-lg-12">

		 					<mat-accordion *ngIf="userDetail">

		 						 <mat-expansion-panel>
								    <mat-expansion-panel-header>
								      <mat-panel-title>
								        <span style="font-size: .8rem;">Edit Information</span>
								      </mat-panel-title>
								      <mat-panel-description >
								        
								      </mat-panel-description>
								    </mat-expansion-panel-header>

										<div style="font-size: .7rem" class="col-lg-12">

						 					<div class="row">

							 					<form class="col-lg-12" #resetInfoForm="ngForm">

							 						<div style="width: 100%;" class="col-lg-12 form-group">
							 							
							 							  <div class="mb-2">
														    <span class="" id="material-addon1">Firstname</span>
														  </div>

														  <input style="width:100%; font-size: .7rem;" class="form-control" type="text"  #firstname="ngModel" [(ngModel)]="userDetail.firstname" name="firstname" [class.invalid]="firstname.invalid && firstname.touched" maxlength="30" required>


														<span style="font-size: .7rem;" *ngIf="firstname.invalid && firstname.touched" class="text-danger">Invalid</span>

							 						</div>

							 						<div style="width: 100%;" class="col-lg-12 form-group">
							 							
							 							  <div class="mb-2">
														    <span class="" id="material-addon1">Middlename</span>
														  </div>

														  <input style="width:100%; font-size: .7rem;" class="form-control" type="text"  #middlename="ngModel" [(ngModel)]="userDetail.middlename" name="middlename" [class.invalid]="middlename.invalid && middlename.touched" maxlength="30" required>


														<span style="font-size: .7rem;" *ngIf="middlename.invalid && middlename.touched" class="text-danger">Invalid</span>

							 						</div>

							 						<div style="width: 100%;" class="col-lg-12 form-group">
							 							
							 							  <div class="mb-2">
														    <span class="" id="material-addon1">Lastname</span>
														  </div>

														  <input style="width:100%; font-size: .7rem;" class="form-control" type="text"  #lastname="ngModel" [(ngModel)]="userDetail.lastname" name="lastname" [class.invalid]="lastname.invalid && lastname.touched" maxlength="30" required>


														<span style="font-size: .7rem;" *ngIf="lastname.invalid && lastname.touched" class="text-danger">Invalid</span>

							 						</div>

							 						<div style="width: 100%;" class="col-lg-12 form-group">
							 							
							 							  <div class="mb-2">
														    <span class="" id="material-addon1">Phone</span>
														  </div>

														  <input style="width:100%; font-size: .7rem;" class="form-control" type="tel"  #phone="ngModel" [(ngModel)]="userDetail.phone" name="phone" [class.invalid]="phone.invalid && phone.touched" maxlength="13" required>


														<span style="font-size: .7rem;" *ngIf="phone.invalid && phone.touched" class="text-danger">Invalid</span>

							 						</div>


							 						<div style="width: 100%;" class="col-lg-12 form-group">
							 							
							 							  <div class="mb-2">
														    <span class="" id="material-addon1">Avatar</span>
														  </div>

														  <input type="file" class="form-control" style="font-size: .7rem;" (change)="onSelectFile($event)" >

														  <br>

														  <img class="border rounded" style="height: 200px; width:200px;" *ngIf="url" src="{{url}}">

							 						</div>


							 						
							 						

							 						<div class="col-lg-12 form-group">
							 							
							 							<button type="button" (click)=" updateUserInfo()" class="btn btn-sm btn-success float-right">save</button>

							 						</div>

							 					</form>

						 					</div>

							 						


							 		</div>

								  </mat-expansion-panel>


								  <mat-expansion-panel>
								    <mat-expansion-panel-header>
								      <mat-panel-title>
								        <span style="font-size: .8rem;">Configure Login Credentials</span>
								      </mat-panel-title>
								      <mat-panel-description >
								    
								      </mat-panel-description>
								    </mat-expansion-panel-header>

										<div style="font-size: .7rem" class="col-lg-12">

						 					<div class="row">

							 					<form class="col-lg-12" #resetForm="ngForm">

							 						<div style="width: 100%;" class="col-lg-12 form-group">
							 							
							 							  <div class="mb-2">
														    <span class="" id="material-addon1">Email</span>
														  </div>

														  <input style="width:100%; font-size: .7rem;" class="form-control" type="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]*" #email="ngModel" [(ngModel)]="userDetail.email" name="email" [class.invalid]="email.invalid && email.touched" maxlength="30" required>


														<span style="font-size: .7rem;" *ngIf="email.invalid && email.touched" class="text-danger">Invalid Email</span>

							 						</div>

							 						<div style="width: 100%;" class="col-lg-12 form-group">
							 							
							 							<div class="mb-2">
														    <span class="" id="material-addon1">Password</span>
														  </div>

														  <input style="width:100%; font-size: .7rem;" class="form-control" type="password"  pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" type="password" #newuserpassword="ngModel" [(ngModel)]="newpass"  name="pass" [class.invalid]="newuserpassword.invalid && newuserpassword.touched" maxlength="20" required>

														<span style="font-size: .7rem;" *ngIf="newuserpassword.invalid && newuserpassword.touched" class="text-danger">Must contain at least one number and one uppercase and lowercase letter, and at least 8 to 20 characters</span>

							 						</div>

							 						<div style="width: 100%;" class="col-lg-12 form-group">
							 							
							 							<div class="mb-2">
														    <span class="" id="material-addon1">Verify Password</span>
														  </div>

														  <input style="width:100%; font-size: .7rem;" class="form-control" type="password" #verifypassword="ngModel" [(ngModel)]="verifyregpassword"  name="verifyregpassword" class="form-control text-light" [class.invalid]="verifypassword.invalid && verifypassword.touched" maxlength="20" required>


														<span style="font-size: .7rem;" *ngIf="newpass != verifyregpassword && verifypassword.touched" class="text-danger">Passwords do not match</span>

							 						</div>

							 						<div class="col-lg-12 form-group">
							 							
							 							<button type="button" (click)="updateConfig()" [class.disabled]="newpass != verifyregpassword" class="btn btn-sm btn-success float-right">save</button>

							 						</div>

							 					</form>

						 					</div>

							 						


							 		</div>

								  </mat-expansion-panel>
				  
						</mat-accordion>

			 						


			 		</div>


	    				</div>

	    			</div>



	    		</div>


	    	</div>


	    </div>

	 </mat-tab>
  	
  	<mat-tab label="First">

  	<ng-template mat-tab-label>
        <i class="fas fa-barcode"></i>
        <span class="ml-2">Transaction History</span>
    </ng-template>

    	<div *ngIf="!sales">
    		
    		<h3>Nothin to show.</h3>

    	</div>

    	<div  *ngIf="sales" style="height:500px;" class="overflow-auto">

    		<mat-progress-bar *ngIf="loadingHis" mode="indeterminate"></mat-progress-bar>


			<mat-accordion>

			  <mat-expansion-panel *ngFor="let row of sales">

			    <mat-expansion-panel-header>
			      <mat-panel-title style="font-size: .7rem;">
			        {{row.user_id.firstname}} {{row.user_id.lastname}}
			      </mat-panel-title>
			      <mat-panel-description ng-class="float-right">
			      	<div style="font-size: .7rem;" class="col-lg-12 float-right text-right">
			        	Recorded on: {{row.sale_date | date:'mediumTime'}}
			        </div>
			      </mat-panel-description>
			    </mat-expansion-panel-header>

			    <div style="font-size: .7rem;" class="col-lg-12">
			    	
			    	<div class="row">

			    		<div class="col-lg-6">

			    			<h5>Transaction Information:</h5> <hr>

			    			<ul class="list-unstyled">
			    				<li>Cost: <span class="float-right">{{row.total}}</span></li>
			    				<li>Amount: Due: <span class="float-right">{{row.amount_due}}</span></li>
			    				<li>Change: <span class="float-right">{{row.change}}</span></li>
			    				<li>Recorded on: <span class="float-right">{{row.sale_date | date:'mediumTime'}}</span></li>
			    			</ul>

			    			
			    		</div>
			    		
			    		<div class="col-lg-6">

			    			<h5>Items</h5> <hr>
			    			
			    			<ul class="list-unstyled">
						    	<li *ngFor="let item of row.item">{{item.name}} <span class="float-right">{{item.quantity}}</span></li>
						    </ul>


			    		</div>


			    	</div>

			    </div>

			  </mat-expansion-panel>
			  
			</mat-accordion>

		</div>


  </mat-tab>

  <mat-tab label="Second">
  	<ng-template mat-tab-label>
        <i class="fas fa-gifts"></i>
        <span class="ml-2">Redeem History</span>
    </ng-template>

    <div *ngIf="!redeem">
    		
    		<h3>Nothin to show.</h3>

    </div>

    <div *ngIf="redeem" style="font-size: .7rem;" style="height:500px;" class="overflow-auto">

    	<mat-progress-bar *ngIf="loadingRed" mode="indeterminate"></mat-progress-bar>

			<mat-accordion>

			  <mat-expansion-panel *ngFor="let row of redeem">

			    <mat-expansion-panel-header style="font-size: .7rem;">
			      <mat-panel-title>
			        {{row.user_id.firstname}} {{row.user_id.lastname}}
			      </mat-panel-title>
			      <mat-panel-description>
			        <div class="col-lg-12 float-right text-right">
			        	Recorded on: {{row.redeem_date | date:'mediumTime'}}
			        </div>
			      </mat-panel-description>
			    </mat-expansion-panel-header>

			    <div style="font-size: .7rem;" class="col-lg-12">
			    	
			    	<div class="row">

			    		<div class="col-lg-6">

			    			<h5>Redeem Information:</h5> <hr>

			    			<ul class="list-unstyled">
			    				<li>Cost: <span class="float-right">{{row.total}}</span></li>
			    				<li>Remaining Points: <span class="float-right">{{row.remaining_points | number:'1.1-3'}}</span></li>
			    				<li>Recorded on: <span class="float-right">{{row.redeem_date | date:'mediumTime'}}</span></li>
			    			</ul>

			    			
			    		</div>
			    		
			    		<div class="col-lg-6">

			    			<h5>Items</h5> <hr>
			    			
			    			<ul class="list-unstyled">
						    	<li *ngFor="let item of row.item">{{item.name}} {{item.quantity}}</li>
						    </ul>


			    		</div>


			    	</div>

			    </div>

			  </mat-expansion-panel>
			  
			</mat-accordion>

		</div>


  </mat-tab>
  
</mat-tab-group>




</div>